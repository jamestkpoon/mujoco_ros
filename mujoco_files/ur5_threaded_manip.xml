<mujoco>

    <compiler angle="radian" />

    <size njmax="500" nconmax="100" />

    <visual>
        <map znear="0.001" />
        <headlight active="1"/>
    </visual>

    <default>
        <geom contype='1' conaffinity='1' condim='4'  margin="1e-3" solref=".01 1" solimp=".99 .99 .01" />
        <light castshadow="false" diffuse="1 1 1" />
        <camera fovy="60" />
        <motor gear="0.8"/>
        <velocity kv="10"/>
        <position kp="5"/>
    </default>

    <include file="ur5/ur5.xml"/>

    <asset>
        <material name="BaseMat" specular="0" shininess="0.6" reflectance="0.9" rgba="0.5 0 0 1" emission="0.7" />
        <material name="ShaftMat" specular="0" shininess="0.6" reflectance="0.9" rgba="0.2 0.2 0.2 1" emission="0.7" />

        <mesh file="objects/nut.stl" scale="0.002 0.002 0.002"/>
        <mesh file="objects/shaft_rot.stl" scale="0.001 0.001 0.001"/>
    </asset>
    
    <worldbody>
        <body pos="2 0 0.5" euler="0.0 -0.1 3.1416"> <!-- seems to need *= -1 ? -->
            <camera name="ros_cam" euler="-1.5708 -1.5708 0" fovy="43.3" /> <!-- needs l/r flip -->
        </body>

        <body name="base" pos="0.5 -0.2 0.01">
            <geom name="base_geom" size="0.075 0.045 0.0075" type="box" material="BaseMat"/>
            <joint type="free"/>
            
            <body name="shaft" pos="0.04 0 0.07">
                <geom name="shaft_geom" pos="0 0 -0.062" euler="0 0 0" type="mesh" mesh="shaft_rot" material="ShaftMat" contype='0' conaffinity='0'/>
                
                <body name="nut" pos="0 0.4 -0.05">
                    <geom name="nut_geom" type="mesh" mesh="nut" material="RobMat"/>
                    <joint name="nut_tx" type="slide" axis="1 0 0"/>
                    <joint name="nut_ty" type="slide" axis="0 1 0"/>
                    <joint name="nut_tz" type="slide" axis="0 0 1"/>
                    <joint name="nut_rx" type="hinge" axis="1 0 0"/>
                    <joint name="nut_ry" type="hinge" axis="0 1 0"/>
                    <joint name="nut_rz" type="hinge" axis="0 0 1"/>
                </body>
            </body>
        </body>
     
    </worldbody>

</mujoco>
